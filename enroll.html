<!DOCTYPE html>
<html>
<head>
  <title>Automation Enrollment Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * { box-sizing: border-box; margin:0; padding:0; font-family:'Inter',sans-serif; }

    body {
      background: radial-gradient(circle at top left,#1e293b,#0f172a 70%);
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      padding:20px;
      color:white;
      opacity:0;
      transition:opacity 0.6s ease;
    }

    body.loaded { opacity:1; }

    .container {
      width:100%;
      max-width:720px;
      background:rgba(255,255,255,0.06);
      backdrop-filter:blur(30px);
      border-radius:25px;
      padding:50px;
      box-shadow:0 30px 80px rgba(0,0,0,0.6);
    }

    h1 {
      text-align:center;
      margin-bottom:8px;
      font-size:26px;
      background:linear-gradient(to right,#6366f1,#8b5cf6);
      -webkit-background-clip:text;
      color:transparent;
    }

    .subtitle {
      text-align:center;
      font-size:14px;
      color:#cbd5e1;
      margin-bottom:35px;
    }

    .progress-bar {
      height:6px;
      background:rgba(255,255,255,0.15);
      border-radius:20px;
      overflow:hidden;
      margin-bottom:35px;
    }

    .progress {
      height:100%;
      width:33%;
      background:linear-gradient(to right,#6366f1,#8b5cf6);
      transition:0.4s ease;
    }

    .step { display:none; animation:slide 0.4s ease; }
    .step.active { display:block; }

    .grid { display:grid; gap:18px; }

    input, select {
      padding:14px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.1);
      background:rgba(255,255,255,0.08);
      color:white;
      outline:none;
      transition:0.3s;
    }

    input:focus, select:focus {
      border-color:#6366f1;
      box-shadow:0 0 15px rgba(99,102,241,0.5);
    }

    .buttons {
      margin-top:30px;
      display:flex;
      justify-content:space-between;
    }

    button {
      padding:12px 24px;
      border:none;
      border-radius:12px;
      cursor:pointer;
      font-weight:500;
      transition:0.3s;
    }

    .btn-primary {
      background:linear-gradient(to right,#6366f1,#8b5cf6);
      color:white;
    }

    .btn-primary:hover {
      transform:translateY(-3px);
      box-shadow:0 15px 40px rgba(99,102,241,0.6);
    }

    .btn-secondary {
      background:rgba(255,255,255,0.15);
      color:white;
    }

    .response {
      text-align:center;
      margin-top:20px;
      font-size:14px;
    }

    /* Loader */
    .loader {
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background:#0f172a;
      display:flex;
      justify-content:center;
      align-items:center;
      flex-direction:column;
      visibility:hidden;
      opacity:0;
      transition:0.4s;
      z-index:1000;
    }

    .loader.active {
      visibility:visible;
      opacity:1;
    }

    .spinner {
      width:50px;
      height:50px;
      border:5px solid rgba(255,255,255,0.2);
      border-top:5px solid #8b5cf6;
      border-radius:50%;
      animation:spin 1s linear infinite;
      margin-bottom:15px;
    }

    @keyframes spin { to { transform:rotate(360deg); } }

    @keyframes slide {
      from { opacity:0; transform:translateX(10px); }
      to { opacity:1; transform:translateX(0); }
    }

    @media(max-width:600px){
      .container { padding:30px; }
    }

  </style>
</head>

<body>

<div class="container">
  <h1>Course Enrollment..</h1>
  <div class="subtitle">fill your personal details</div>

  <div class="progress-bar">
    <div class="progress" id="progress"></div>
  </div>

  <form id="studentForm">

    <!-- Step 1 -->
    <div class="step active">
      <div class="grid">
        <input type="text" name="student_id" placeholder="Student ID" required>
        <input type="text" name="full_name" placeholder="Full Name" required>
        <input type="email" name="email" placeholder="Email Address" required>
      </div>
      <div class="buttons">
        <div></div>
        <button type="button" class="btn-primary" onclick="nextStep()">Next</button>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="grid">
        <input type="date" name="date_of_birth" required>
        <select name="gender">
          <option value="">Select Gender</option>
          <option>Male</option>
          <option>Female</option>
          <option>Other</option>
        </select>
        <input type="text" name="phone_number" placeholder="Phone Number" required>
      </div>
      <div class="buttons">
        <button type="button" class="btn-secondary" onclick="prevStep()">Back</button>
        <button type="button" class="btn-primary" onclick="nextStep()">Next</button>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="grid">
        <input type="text" name="class" placeholder="Course" required>
        <input type="text" name="section" placeholder="Batch" required>
        <input type="text" name="roll_no" placeholder="Roll No" required>
        <input type="number" name="fees_paid_inr" placeholder="Fees Paid (INR)" required>
        
      </div>
      <div class="buttons">
        <button type="button" class="btn-secondary" onclick="prevStep()">Back</button>
        <button type="submit" class="btn-primary">Submit</button>
      </div>
    </div>

    <div class="response" id="responseMsg"></div>
  </form>
</div>

<div class="loader" id="loader">
  <div class="spinner"></div>
  <p>Processing your enrollment...</p>
</div>

<script>

window.onload = () => document.body.classList.add("loaded");

let currentStep = 0;
const steps = document.querySelectorAll(".step");
const progress = document.getElementById("progress");

function showStep(index){
  steps.forEach(step => step.classList.remove("active"));
  steps[index].classList.add("active");
  progress.style.width = ((index+1)/steps.length)*100 + "%";
}

function nextStep(){
  if(currentStep < steps.length-1){
    currentStep++;
    showStep(currentStep);
  }
}

function prevStep(){
  if(currentStep > 0){
    currentStep--;
    showStep(currentStep);
  }
}

document.getElementById("studentForm").addEventListener("submit", async function(e){
  e.preventDefault();

  document.getElementById("loader").classList.add("active");

  const formData = new FormData(this);
  const data = {};
  formData.forEach((value,key)=> data[key]=value);

  try{
    const res = await fetch("https://adityagagare.app.n8n.cloud/webhook-test/b9d91740-1b92-46c0-8435-ff2042ec3ff5",{
      method:"POST",
      headers:{ "Content-Type":"application/json"},
      body: JSON.stringify(data)
    });

    if(res.ok){
      setTimeout(()=>{
        window.location.href="success.html";
      },1500);
    } else {
      document.getElementById("loader").classList.remove("active");
      document.getElementById("responseMsg").innerHTML="❌ Submission failed.";
    }

  }catch(err){
    document.getElementById("loader").classList.remove("active");
    document.getElementById("responseMsg").innerHTML="⚠ Network Error.";
  }
});

</script>

</body>
</html>
